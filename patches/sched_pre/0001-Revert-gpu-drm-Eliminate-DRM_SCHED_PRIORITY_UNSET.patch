From 6edc1ae6a5accd1f533119f08eb31389ca8775d7 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Mon, 23 Oct 2023 21:41:02 -0500
Subject: [PATCH] Revert "gpu/drm: Eliminate DRM_SCHED_PRIORITY_UNSET"

This reverts commit fa8391ad68c16716e2c06ada397e99ceed2fb647.

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.c | 3 +--
 include/drm/gpu_scheduler.h             | 3 ++-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.c
index aac52d9754e6..092962b93064 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.c
@@ -64,8 +64,7 @@ amdgpu_ctx_to_drm_sched_prio(int32_t ctx_prio)
 {
 	switch (ctx_prio) {
 	case AMDGPU_CTX_PRIORITY_UNSET:
-		pr_warn_once("AMD-->DRM context priority value UNSET-->NORMAL");
-		return DRM_SCHED_PRIORITY_NORMAL;
+		return DRM_SCHED_PRIORITY_UNSET;
 
 	case AMDGPU_CTX_PRIORITY_VERY_LOW:
 		return DRM_SCHED_PRIORITY_MIN;
diff --git a/include/drm/gpu_scheduler.h b/include/drm/gpu_scheduler.h
index ac65f0626cfc..f9544d9b670d 100644
--- a/include/drm/gpu_scheduler.h
+++ b/include/drm/gpu_scheduler.h
@@ -68,7 +68,8 @@ enum drm_sched_priority {
 	DRM_SCHED_PRIORITY_HIGH,
 	DRM_SCHED_PRIORITY_KERNEL,
 
-	DRM_SCHED_PRIORITY_COUNT
+	DRM_SCHED_PRIORITY_COUNT,
+	DRM_SCHED_PRIORITY_UNSET = -2
 };
 
 /* Used to chose between FIFO and RR jobs scheduling */
-- 
2.39.2

