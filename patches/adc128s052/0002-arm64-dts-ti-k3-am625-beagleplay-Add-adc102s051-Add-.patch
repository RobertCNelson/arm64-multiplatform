From 1a09c5125f5e7677329fe778ba382b5afd54fbb9 Mon Sep 17 00:00:00 2001
From: Sukrut Bellary <sukrut.bellary@linux.com>
Date: Wed, 18 Oct 2023 07:34:40 -0700
Subject: [PATCH 2/3] arm64: dts: ti: k3-am625-beagleplay: Add adc102s051 Add
 adc102s051 support. Tested on beaglePlay SBC
 https://www.beagleboard.org/boards/beagleplay

Signed-off-by: Sukrut Bellary <sukrut.bellary@linux.com>
---
 .../arm64/boot/dts/ti/k3-am625-beagleplay.dts | 26 +++++++++++++++++++
 1 file changed, 26 insertions(+)

diff --git a/arch/arm64/boot/dts/ti/k3-am625-beagleplay.dts b/arch/arm64/boot/dts/ti/k3-am625-beagleplay.dts
index 30361f0a44d9..f0bff000cb61 100644
--- a/arch/arm64/boot/dts/ti/k3-am625-beagleplay.dts
+++ b/arch/arm64/boot/dts/ti/k3-am625-beagleplay.dts
@@ -539,6 +539,15 @@ wifi_32k_clk: mcu-clk-out-default-pins {
 			AM62X_MCU_IOPAD(0x0084, PIN_OUTPUT, 0) /* (A12) WKUP_CLKOUT0 */
 		>;
 	};
+
+	adc_spi_pins_default: adc-spi-default-pins {
+		pinctrl-single,pins = <
+			AM62X_MCU_IOPAD(0x0040, PIN_INPUT, 4) /* (D4) MCU_MCAN1_RX.MCU_SPI1_CLK */
+			AM62X_MCU_IOPAD(0x003c, PIN_INPUT, 3) /* (E5) MCU_MCAN1_TX.MCU_SPI1_CS1 */
+			AM62X_MCU_IOPAD(0x001c, PIN_INPUT, 3) /* (A6) MCU_UART0_CTSn.MCU_SPI1_D0 */
+			AM62X_MCU_IOPAD(0x0020, PIN_INPUT, 3) /* (B6) MCU_UART0_RTSn.MCU_SPI1_D1 */
+		>;
+	};
 };
 
 &a53_opp_table {
@@ -549,6 +558,23 @@ opp-1400000000 {
 	};
 };
 
+&mcu_spi1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&adc_spi_pins_default>;
+	#address-cells = <1>;
+	#size-cells= <0>;
+	ti,spi-num-cs = <2>;
+	status = "okay";
+
+	adc@1 {
+		compatible = "ti,adc102s051";
+		reg = <1>;
+		vref-supply = <&vdd_3v3>;
+		spi-max-frequency = <4000000>;
+		#io-channel-cells = <1>;
+	};
+};
+
 &wkup_i2c0 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&i2c_csi_pins_default>;
-- 
2.39.2

